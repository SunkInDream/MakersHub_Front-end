<!--pages/my_xiumi_list/my_xiumi_link.wxml-->
<view class="container">
  <!-- 顶部导航栏，包含页面标题和编辑图标 -->
  <navBar class="navbar"
          title="我的秀米链接"
          background="#222831"
          color="#fff"
          back="{{true}}"
          home="{{true}}"
          iconTheme="white"
          bindback="handlerGobackClick"
          bindhome="handlerGohomeClick" />

  <!-- 下半 切换 -->
  <view class="tab">
    <text bindtap="changeItem" data-item="0" class="{{tab==0?'active':''}}">待审核</text>
    <text bindtap="changeItem" data-item="1" class="{{tab==1?'active':''}}">已打回</text>
    <text bindtap="changeItem" data-item="2" class="{{tab==2?'active':''}}">已通过</text>
    <view class="add-button">+</view>
  </view>

  <!-- 内容区域 swiper 切换 -->
  <swiper current="{{tab}}" bindchange="onSwiperChange">
    <!--待审核-->
    <swiper-item>
      <view class="list-container">
        <block wx:for="{{unreviewedList}}" wx:key="apply_id">
          <view class="item-container">
            <view class="item-details">
              <view class="title-and-state">
                <text class="title">{{item.title}}</text>
                <view 
                  class="state" 
                  style="background-color: {{stateColors[item.state]}}; color: {{stateText[item.state]}}">
                  {{stateTag[item.state]}}
                </view>
              </view>
              <text class="label">申请创建时间：</text>
              <text class="create-time">{{item.formatted_time}}</text> 
              <text class="label">秀米链接：</text>
              <text class="create-time">{{item.link}}</text> 
            </view>
            <view class="detail-btn" data-event-id="{{item.apply_id}}" bindtap="navigateToDetail">修改</view>
          </view>
        </block>
      </view>
    </swiper-item>
    
    <!-- 已打回 tab -->
    <swiper-item>
      <view class="list-container">
        <block wx:for="{{rejectedList}}" wx:key="apply_id">
          <view class="item-container">
            <view class="item-details">
              <view class="title-and-state">
                <text class="title">{{item.title}}</text>
                <view 
                  class="state" 
                  style="background-color: {{stateColors[item.state]}}; color: {{stateText[item.state]}}">
                  {{stateTag[item.state]}}
                </view>
              </view>
              <text class="label">申请创建时间：</text>
              <text class="create-time">{{item.formatted_time}}</text> 
              <text class="label">秀米链接：</text>
              <text class="create-time">{{item.link}}</text> 
            </view>
            <view class="detail-btn" data-event-id="{{item.apply_id}}" bindtap="navigateToDetail">修改</view>
          </view>
        </block>
      </view>
    </swiper-item>

    <!-- 已通过 tab -->
    <swiper-item>
      <view class="list-container">
        <block wx:for="{{approvedList}}" wx:key="apply_id">
          <view class="item-container">
            <view class="item-details">
              <view class="title-and-state">
                <text class="title">{{item.title}}</text>
                <view 
                  class="state" 
                  style="background-color: {{stateColors[item.state]}}; color: {{stateText[item.state]}}">
                  {{stateTag[item.state]}}
                </view>
              </view>
              <text class="label">申请创建时间：</text>
              <text class="create-time">{{item.formatted_time}}</text> 
              <text class="label">秀米链接：</text>
              <text class="create-time">{{item.link}}</text> 
            </view>
            <image class="green-cat-pattern" 
              src="/images/pubulicity_work_page/cat_pattern.svg"
              mode="widthFix"
            ></image>
          </view>
        </block>
      </view>
    </swiper-item>
  </swiper>

  <!-- 底部装饰图片 -->
  <image class="bottom-image" src="/images/object_borrow_list/white_cat.svg" mode="widthFix" />
</view>
<view class="container">
  <!-- 顶部导航栏 -->
  <navBar class="navbar"
          title="我的借物"
          background="#222831"
          color="#fff"
          back="{{true}}"
          home="{{true}}"
          iconTheme="white"
          bindback="handlerGobackClick"
          bindhome="handlerGohomeClick" />

  <!-- 标签切换 -->
  <view class="tab">
    <text bindtap="changeItem" data-item="0" class="{{tab==0?'active':''}}">全部</text>
    <text bindtap="changeItem" data-item="1" class="{{tab==1?'active':''}}">借用中</text>
    <text bindtap="changeItem" data-item="2" class="{{tab==2?'active':''}}">已归还</text>
    <text bindtap="changeItem" data-item="3" class="{{tab==3?'active':''}}">在约</text>
  </view>

  <swiper current="{{tab}}" bindchange="onSwiperChange">

    <!-- 通用卡片渲染 -->
    <swiper-item wx:for="{{[list, borrowingList, returnedList, unpermittedList]}}" wx:for-index="tabIndex" wx:for-item="renderList">
      <view class="list-container">
        <block wx:for="{{renderList}}" wx:key="sb_id">
          <view class="item-container"
                data-sb-id="{{item.sb_id}}"
                data-state="{{item.state}}"
                bindtap="navigateToDetail">
            <view class="item-details">
              <text class="name">{{item.grade}}-{{item.major}}-{{item.name}}</text>
              <text class="label">申请创建时间：</text>
              <view class="time-and-state">
                <text class="create-time">{{item.start_time}}</text>
                <view class="state"
                      style="background-color: {{stateColors[item.state]}}; color: {{stateText[item.state]}}">
                  {{stateTag[item.state]}}
                </view>
              </view>
            </view>
            <view class="detail-btn">详情</view>
          </view>
        </block>
      </view>
    </swiper-item>

  </swiper>

  <view class="bottom-image-container">
    <image class="bottom-image" src="/images/my_stuff_borrow_list/white_cat.svg" mode="widthFix"></image>
  </view>
</view>
